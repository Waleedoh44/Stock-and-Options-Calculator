<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø£Ø³Ù‡Ù… ÙˆØ§Ù„Ø¹Ù‚ÙˆØ¯</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME VARIABLES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
[data-theme="dark"] {
  --bg:#0a0e1a;--sur:#111827;--sur2:#1a2235;
  --gold:#f0b429;--gdim:#b8841f;
  --green:#22c55e;--gdark:#166534;
  --red:#ef4444;--rdark:#7f1d1d;
  --blue:#3b82f6;
  --txt:#e2e8f0;--mut:#64748b;--bdr:#1e293b;
  --shadow:rgba(0,0,0,.45);
  --toggle-bg:#1e293b;--toggle-knob:#f0b429;
  --grad1:rgba(240,180,41,.07);--grad2:rgba(34,197,94,.06);--grad3:rgba(59,130,246,.04);
  --input-bg:#1a2235;
}
[data-theme="light"] {
  --bg:#f0f4f8;--sur:#ffffff;--sur2:#f8fafc;
  --gold:#c47d00;--gdim:#a86800;
  --green:#16a34a;--gdark:#bbf7d0;
  --red:#dc2626;--rdark:#fecaca;
  --blue:#2563eb;
  --txt:#1e293b;--mut:#64748b;--bdr:#e2e8f0;
  --shadow:rgba(0,0,0,.10);
  --toggle-bg:#e2e8f0;--toggle-knob:#c47d00;
  --grad1:rgba(240,180,41,.05);--grad2:rgba(22,163,74,.04);--grad3:rgba(37,99,235,.03);
  --input-bg:#f1f5f9;
}

*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Tajawal',sans-serif;background:var(--bg);color:var(--txt);min-height:100vh;overflow-x:hidden;transition:background .3s,color .3s;}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:
    radial-gradient(ellipse 70% 50% at 10% 15%,var(--grad1) 0%,transparent 55%),
    radial-gradient(ellipse 60% 45% at 90% 85%,var(--grad2) 0%,transparent 55%),
    radial-gradient(ellipse 50% 40% at 50% 50%,var(--grad3) 0%,transparent 60%);}
.page{max-width:1300px;margin:0 auto;padding:20px 16px;position:relative;z-index:1;}

/* â”€â”€ Theme Toggle â”€â”€ */
.topbar{display:flex;justify-content:flex-start;align-items:center;margin-bottom:4px;}
.theme-toggle{display:flex;align-items:center;gap:10px;background:var(--toggle-bg);border:1px solid var(--bdr);border-radius:999px;padding:6px 14px;cursor:pointer;transition:all .3s;user-select:none;}
.theme-toggle:hover{border-color:var(--gold);}
.theme-label{font-size:12px;font-weight:700;color:var(--mut);letter-spacing:1px;transition:color .3s;}
.toggle-track{width:40px;height:22px;background:var(--bdr);border-radius:999px;position:relative;transition:background .3s;}
[data-theme="light"] .toggle-track{background:var(--gold);}
.toggle-knob{width:16px;height:16px;background:#fff;border-radius:50%;position:absolute;top:3px;right:3px;transition:transform .3s,background .3s;box-shadow:0 1px 4px rgba(0,0,0,.3);}
[data-theme="light"] .toggle-knob{transform:translateX(-18px);background:#fff;}
.sun-icon,.moon-icon{font-size:14px;}

/* Header */
header{text-align:center;padding:16px 0 20px;animation:fadeD .6s ease both;}
.badge{display:inline-block;background:linear-gradient(135deg,var(--gdim),var(--gold));
  color:#000;font-size:20px;font-weight:800;letter-spacing:3px;padding:4px 18px;
  border-radius:20px;margin-bottom:10px;text-transform:uppercase;}
h1{font-size:clamp(22px,4vw,42px);font-weight:900;
  background:linear-gradient(135deg,var(--txt) 0%,var(--gold) 55%,var(--txt) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:4px;}
.sub{color:var(--mut);font-size:12px;}

/* â”€â”€ Tabs â”€â”€ */
.tabs{display:flex;gap:8px;margin-bottom:20px;background:var(--sur);border:1px solid var(--bdr);border-radius:14px;padding:6px;}
.tab-btn{flex:1;padding:12px 20px;border:none;border-radius:10px;font-family:'Tajawal',sans-serif;
  font-size:16px;font-weight:700;cursor:pointer;transition:all .25s;background:transparent;color:var(--mut);letter-spacing:.5px;}
.tab-btn.active{background:linear-gradient(135deg,var(--gdim),var(--gold));color:#000;}
.tab-btn:hover:not(.active){background:var(--sur2);color:var(--txt);}
.tab-panel{display:none;}
.tab-panel.active{display:block;}

/* â”€â”€ Section divider â”€â”€ */
.divider{display:flex;align-items:center;gap:10px;margin:18px 0 12px;
  font-size:10px;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--mut);}
.divider::before,.divider::after{content:'';flex:1;height:1px;background:var(--bdr);}

/* â”€â”€ Card â”€â”€ */
.card{background:var(--sur);border:1px solid var(--bdr);border-radius:16px;overflow:hidden;animation:fadeU .5s ease both;box-shadow:0 2px 12px var(--shadow);}
.ch{background:var(--sur2);padding:11px 18px;font-size:10px;font-weight:800;letter-spacing:1.5px;
  color:var(--gold);border-bottom:1px solid var(--bdr);text-transform:uppercase;}
.cb{padding:16px;}

/* â”€â”€ Input row â”€â”€ */
.ir{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--bdr);gap:10px;}
.ir:last-child{border-bottom:none;}
.ir label{font-size:13px;color:var(--mut);flex:1;font-weight:500;}
.ir input{background:var(--input-bg);border:1px solid var(--bdr);border-radius:8px;
  color:var(--gold);font-family:'Space Mono',monospace;font-size:15px;font-weight:700;
  padding:7px 12px;width:120px;text-align:center;outline:none;transition:all .2s;}
.ir input:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(240,180,41,.12);}

/* â”€â”€ Result row â”€â”€ */
.rr{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--bdr);}
.rr:last-child{border-bottom:none;}
.rl{font-size:14px;color:var(--mut);font-weight:500;}
.rv{font-family:'Space Mono',monospace;font-size:13px;font-weight:700;}

/* â”€â”€ Breakeven row â”€â”€ */
.be-row{display:flex;align-items:center;justify-content:space-between;padding:9px 12px;
  margin:8px 0;border-radius:10px;
  background:linear-gradient(135deg,rgba(59,130,246,.12),rgba(59,130,246,.06));
  border:1px solid rgba(59,130,246,.25);}
.be-label{font-size:13px;color:var(--blue);font-weight:700;display:flex;align-items:center;gap:6px;}
.be-val{font-family:'Space Mono',monospace;font-size:15px;font-weight:700;color:var(--blue);}

/* â”€â”€ Big number â”€â”€ */
.bign{text-align:center;padding:12px 8px 8px;}
.bign .n{font-family:'Space Mono',monospace;font-size:clamp(28px,5vw,46px);font-weight:700;line-height:1;}
.bign .s{font-size:14px;color:var(--mut);margin-top:4px;}

/* â”€â”€ PnL cards â”€â”€ */
.pnl-duo{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:14px;}
@media(max-width:600px){.pnl-duo{grid-template-columns:1fr;}}
.pc{border-radius:14px;padding:14px;}
[data-theme="dark"] .pc.profit{background:linear-gradient(135deg,#052e16,#14532d);border:1px solid var(--gdark);}
[data-theme="dark"] .pc.loss  {background:linear-gradient(135deg,#450a0a,#7f1d1d);border:1px solid var(--rdark);}
[data-theme="light"] .pc.profit{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1px solid #86efac;}
[data-theme="light"] .pc.loss  {background:linear-gradient(135deg,#fff5f5,#fee2e2);border:1px solid #fca5a5;}
.ptitle{font-size:10px;font-weight:800;letter-spacing:2px;text-transform:uppercase;margin-bottom:10px;opacity:.8;}
.pgrid{display:grid;grid-template-columns:1fr 1fr;gap:7px;}
.pi{background:rgba(0,0,0,.1);border-radius:9px;padding:9px 10px;text-align:center;}
[data-theme="light"] .pi{background:rgba(0,0,0,.05);}
.pl{font-size:12px;opacity:.6;margin-bottom:3px;}
.pv{font-family:'Space Mono',monospace;font-size:13px;font-weight:700;}

/* â”€â”€ Max section â”€â”€ */
.max-card{background:var(--sur);border:1px solid var(--bdr);border-radius:16px;padding:16px;margin-bottom:14px;box-shadow:0 2px 12px var(--shadow);}
.mh{font-size:10px;color:var(--mut);letter-spacing:1.5px;text-transform:uppercase;font-weight:800;margin-bottom:12px;}
.mgrid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
@media(max-width:500px){.mgrid{grid-template-columns:1fr;}}
.mi{border-radius:11px;padding:12px;text-align:center;}
.ml{font-size:14px;color:var(--mut);margin-bottom:5px;}
.mv{font-family:'Space Mono',monospace;font-size:16px;font-weight:700;}
.ms{font-size:14px;color:var(--mut);margin-top:4px;}
.mn{background:var(--sur2);border:1px solid var(--bdr);}
.mp{background:rgba(34,197,94,.1);border:1px solid var(--gdark);}
.mr{background:rgba(239,68,68,.1);border:1px solid var(--rdark);}
[data-theme="light"] .mp{background:rgba(22,163,74,.08);border:1px solid #86efac;}
[data-theme="light"] .mr{background:rgba(220,38,38,.06);border:1px solid #fca5a5;}

/* â”€â”€ Risk meter â”€â”€ */
.rmeter{background:var(--sur);border:1px solid var(--bdr);border-radius:14px;padding:16px;margin-bottom:14px;}
.rmtitle{font-size:10px;color:var(--mut);letter-spacing:1px;text-transform:uppercase;font-weight:700;margin-bottom:10px;}
.rmtrack{background:var(--sur2);border-radius:999px;height:9px;overflow:hidden;margin-bottom:7px;}
.rmfill{height:100%;border-radius:999px;
  background:linear-gradient(90deg,var(--green) 0%,var(--gold) 50%,var(--red) 100%);
  transition:width .5s cubic-bezier(.4,2,.6,1);}
.rmlabels{display:flex;justify-content:space-between;font-size:9px;color:var(--mut);}

/* â”€â”€ RR card â”€â”€ */
.rr-card{background:linear-gradient(135deg,#1a1a0a,#2a2200);border:2px solid var(--gold);
  border-radius:16px;padding:20px;text-align:center;position:relative;overflow:hidden;}
[data-theme="light"] .rr-card{background:linear-gradient(135deg,#fffbeb,#fef3c7);}
.rr-card::before{content:'';position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(ellipse at center,rgba(240,180,41,.1) 0%,transparent 70%);}
.rrl{font-size:14px;color:var(--gdim);letter-spacing:3px;font-weight:800;text-transform:uppercase;margin-bottom:5px;}
.rrv{font-family:'Space Mono',monospace;font-size:40px;font-weight:700;color:var(--gold);line-height:1;}
.rrd{font-size:14px;color:var(--mut);margin-top:5px;}

/* Colors */
.gc{color:var(--green);}.rc{color:var(--red);}.gldc{color:var(--gold);}.bc{color:var(--blue);}.wc{color:var(--txt);}

/* â”€â”€ Warning badge â”€â”€ */
.warn-badge{display:inline-flex;align-items:center;gap:5px;background:rgba(239,68,68,.12);
  border:1px solid rgba(239,68,68,.3);border-radius:6px;padding:2px 8px;
  font-size:11px;color:var(--red);font-weight:700;margin-top:3px;}

.foot{text-align:center;padding:20px 0 8px;font-size:10px;color:var(--mut);letter-spacing:1px;}

@media(max-width:768px){.duo{grid-template-columns:1fr;}}

@keyframes fadeU{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeD{from{opacity:0;transform:translateY(-18px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div class="page">

<!-- â•â• Topbar: Theme Toggle â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="topbar">
  <div class="theme-toggle" onclick="toggleTheme()" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹">
    <span class="moon-icon">ğŸŒ™</span>
    <div class="toggle-track"><div class="toggle-knob"></div></div>
    <span class="sun-icon">â˜€ï¸</span>
  </div>
</div>

<!-- â•â• Header â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header>
  <div class="badge">âš¡ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</div>
  <h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø£Ø³Ù‡Ù… ÙˆØ§Ù„Ø¹Ù‚ÙˆØ¯</h1>
  <p class="sub">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„ØµÙÙ‚Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø±Ø£Ø³ Ù…Ø§Ù„Ùƒ ÙˆÙ†Ø³Ø¨Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©</p>
</header>

<!-- â•â• Tabs â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="tabs">
  <button class="tab-btn active" onclick="switchTab('stocks')">ğŸ“ˆ Ø§Ù„Ø£Ø³Ù‡Ù…</button>
  <button class="tab-btn"       onclick="switchTab('contracts')">ğŸ“œ Ø§Ù„Ø¹Ù‚ÙˆØ¯</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TAB: STOCKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="tab-panel active" id="tab-stocks">

  <div class="divider">âš™ï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙÙ‚Ø©</div>
  <div class="card" style="max-width:560px;margin:0 auto 14px;">
    <div class="ch">ğŸ“ˆ Ø£Ø³Ù‡Ù… â€” Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª</div>
    <div class="cb">
      <div class="ir"><label>Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ $</label>     <input type="number" id="s-cap"    value="1000" step="100"  oninput="calc()"></div>
      <div class="ir"><label>Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø© %</label> <input type="number" id="s-risk"   value="3"    step="0.1"  oninput="calc()"></div>
      <div class="ir"><label>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ $</label>    <input type="number" id="s-buy"    value="4.00" step="0.01" oninput="calc()"></div>
      <div class="ir"><label>ÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø© $</label>   <input type="number" id="s-stop"   value="3.85" step="0.01" oninput="calc()"></div>
      <div class="ir"><label>Ø³Ø¹Ø± Ø§Ù„Ù‡Ø¯Ù $</label>     <input type="number" id="s-target" value="4.60" step="0.01" oninput="calc()"></div>
    </div>
  </div>

  <div class="divider">ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø³Ø§Ø¨</div>
  <div class="card" style="max-width:560px;margin:0 auto 14px;">
    <div class="ch">ğŸ“ˆ Ø£Ø³Ù‡Ù… â€” Ù†ØªØ§Ø¦Ø¬</div>
    <div class="cb">
      <div class="bign"><div class="n gldc" id="s-nd">200</div><div class="s">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ù„Ù„ØµÙÙ‚Ø©</div></div>
      <!-- Breakeven -->
      <div class="be-row">
        <span class="be-label">ğŸ“ Ø³Ø¹Ø± Ø§Ù„ØªØ¹Ø§Ø¯Ù„ (Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</span>
        <span class="be-val" id="s-be">$4.01</span>
      </div>
      <div class="rr"><span class="rl">Ù‚ÙŠÙ…Ø© Ø§Ù„ØµÙÙ‚Ø©</span>              <span class="rv wc"   id="s-tv">$800.00</span></div>
      <div class="rr"><span class="rl">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</span>        <span class="rv gc"   id="s-rem">$200.00</span></div>
      <div class="rr"><span class="rl">Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­ Ø¹Ù†Ø¯ Ø§Ù„Ù‡Ø¯Ù</span>    <span class="rv gc"   id="s-pp2">15.00%</span></div>
      <div class="rr"><span class="rl">Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© (Ø´Ø§Ù…Ù„Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</span>  <span class="rv rc"   id="s-lp">3.75%</span></div>
      <div class="rr"><span class="rl">Ø£Ù‚ØµÙ‰ Ù…Ø¨Ù„Øº Ù„Ù„Ù…Ø®Ø§Ø·Ø±Ø©</span>      <span class="rv gldc" id="s-maxr">$30.00</span></div>
      <div class="rr"><span class="rl">Ø§Ù„ÙØ±Ù‚ (Ø³Ø¹Ø± âˆ’ ÙˆÙ‚Ù)</span>       <span class="rv wc"   id="s-diff">0.15</span></div>
      <div class="rr"><span class="rl">Ø¹Ù…ÙˆÙ„Ø© Ø´Ø±Ø§Ø¡ + Ø¨ÙŠØ¹</span>        <span class="rv gldc" id="s-comm">$2.30</span></div>
    </div>
  </div>

  <div class="divider">ğŸ“ˆ Ø§Ù„Ø±Ø¨Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø±Ø©</div>
  <div class="pnl-duo">
    <div class="pc profit">
      <div class="ptitle gc">ğŸŸ¢ Ø§Ù„Ø±Ø¨Ø­ Ø¹Ù†Ø¯ Ø§Ù„Ø¨ÙŠØ¹</div>
      <div class="pgrid">
        <div class="pi"><div class="pl">Ø±Ø¨Ø­ %</div>       <div class="pv gc" id="s-pp">15.00%</div></div>
        <div class="pi"><div class="pl">Ø±Ø¨Ø­ Ã— Ø£Ø³Ù‡Ù…</div>  <div class="pv gc" id="s-pc">0.60Ã—200</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ $ (Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</div>   <div class="pv gc" id="s-pu">$120.00</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ Ø±.Ø³</div>  <div class="pv gc" id="s-ps">Ø±.Ø³ 450.00</div></div>
      </div>
    </div>
    <div class="pc loss">
      <div class="ptitle rc">ğŸ”´ Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚Ù</div>
      <div class="pgrid">
        <div class="pi"><div class="pl">Ø®Ø³Ø§Ø±Ø© % (ØµØ§ÙÙŠ)</div>      <div class="pv rc" id="s-lpc">-3.75%</div></div>
        <div class="pi"><div class="pl">Ø®Ø³Ø§Ø±Ø© Ã— Ø£Ø³Ù‡Ù…</div><div class="pv rc" id="s-lc">-0.15Ã—200</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ $ (Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</div>   <div class="pv rc" id="s-lu">-$30.00</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ Ø±.Ø³</div>  <div class="pv rc" id="s-ls">Ø±.Ø³ -112.50</div></div>
      </div>
      <div style="text-align:center;margin-top:8px;" id="s-warn-wrap"></div>
    </div>
  </div>

  <div class="divider">ğŸš€ Ø£Ù‚ØµÙ‰ Ø£Ø³Ù‡Ù… Ù…Ù…ÙƒÙ†Ø© (Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</div>
  <div class="max-card">
    <div class="mh">ğŸ“ˆ Ø£Ø³Ù‡Ù…</div>
    <div class="mgrid">
      <div class="mi mn">
        <div class="ml">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ù…Ù…ÙƒÙ†</div>
        <div class="mv bc"  id="s-maxn">249</div>
        <div class="ms"    id="s-minfo">ØªÙƒÙ„ÙØ© $996.00 + Ø¹Ù…ÙˆÙ„Ø© $2.86</div>
      </div>
      <div class="mi mp">
        <div class="ml">Ø±Ø¨Ø­ Ù…Ù…ÙƒÙ† (ØµØ§ÙÙŠ) $</div>
        <div class="mv gc" id="s-mpu">$149.40</div>
        <div class="ms"    id="s-mps">Ø±.Ø³ 560.25</div>
      </div>
      <div class="mi mr">
        <div class="ml">Ø®Ø³Ø§Ø±Ø© Ù…Ù…ÙƒÙ†Ø© (ØµØ§ÙÙŠ) $</div>
        <div class="mv rc" id="s-mlu">-$37.35</div>
        <div class="ms"    id="s-mls">Ø±.Ø³ -140.06</div>
      </div>
    </div>
  </div>

  <div class="divider">âš–ï¸ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©</div>
  <div style="max-width:560px;margin:0 auto 20px;">
    <div class="rr-card">
      <div class="rrl">Ø£Ø³Ù‡Ù… â€” R / R</div>
      <div class="rrv" id="s-rrv">1 : 4.0</div>
      <div class="rrd" id="s-rrd">Ù…Ù…ØªØ§Ø² â€” ØªØ®Ø§Ø·Ø± Ø¨Ù€ 1 Ù„Ù„Ø±Ø¨Ø­ 4.0</div>
    </div>
  </div>

</div><!-- /tab-stocks -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TAB: CONTRACTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="tab-panel" id="tab-contracts">

  <div class="divider">âš™ï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙÙ‚Ø©</div>
  <div class="card" style="max-width:560px;margin:0 auto 14px;">
    <div class="ch">ğŸ“œ Ø¹Ù‚ÙˆØ¯ â€” Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª</div>
    <div class="cb">
      <div class="ir"><label>Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ $</label>     <input type="number" id="c-cap"  value="1000"  step="50"   oninput="calc()"></div>
      <div class="ir"><label>Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø© %</label> <input type="number" id="c-risk" value="5"    step="0.1"  oninput="calc()"></div>
      <div class="ir"><label>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ $</label>    <input type="number" id="c-buy"  value="0.27" step="0.01" oninput="calc()"></div>
      <div class="ir"><label>ÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø© $</label>   <input type="number" id="c-stop" value="0.23" step="0.01" oninput="calc()"></div>
      <div class="ir"><label>Ø³Ø¹Ø± Ø§Ù„Ù‡Ø¯Ù $</label>     <input type="number" id="c-sell" value="0.37" step="0.01" oninput="calc()"></div>
    </div>
  </div>

  <div class="divider">ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø³Ø§Ø¨</div>
  <div class="card" style="max-width:560px;margin:0 auto 14px;">
    <div class="ch">ğŸ“œ Ø¹Ù‚ÙˆØ¯ â€” Ù†ØªØ§Ø¦Ø¬</div>
    <div class="cb">
      <div class="bign"><div class="n gldc" id="c-nd">12</div><div class="s">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„ÙØ¹Ù„ÙŠØ© (Ù…Ø¨Ù†Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©)</div></div>
      <!-- Breakeven -->
      <div class="be-row">
        <span class="be-label">ğŸ“ Ø³Ø¹Ø± Ø§Ù„ØªØ¹Ø§Ø¯Ù„ (Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</span>
        <span class="be-val" id="c-be">$0.272</span>
      </div>
      <div class="rr"><span class="rl">Ù‚ÙŠÙ…Ø© Ø§Ù„ØµÙÙ‚Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©</span>            <span class="rv wc"   id="c-tv">$324.00</span></div>
      <div class="rr"><span class="rl">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</span>              <span class="rv gc"   id="c-rem">$676.00</span></div>
      <div class="rr"><span class="rl">Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­ Ø¹Ù†Ø¯ Ø§Ù„Ù‡Ø¯Ù</span>          <span class="rv gc"   id="c-pp">37.04%</span></div>
      <div class="rr"><span class="rl">Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© (Ø´Ø§Ù…Ù„Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</span>        <span class="rv rc"   id="c-lp">14.81%</span></div>
      <div class="rr"><span class="rl">Ø£Ù‚ØµÙ‰ Ù…Ø¨Ù„Øº Ù„Ù„Ù…Ø®Ø§Ø·Ø±Ø©</span>            <span class="rv gldc" id="c-maxr">$50.00</span></div>
      <div class="rr"><span class="rl">Ø§Ù„ÙØ±Ù‚ (Ø³Ø¹Ø± âˆ’ ÙˆÙ‚Ù)</span>             <span class="rv wc"   id="c-diff">$0.04</span></div>
      <div class="rr"><span class="rl">Ø¹Ù…ÙˆÙ„Ø© Ø´Ø±Ø§Ø¡ + Ø¨ÙŠØ¹</span>              <span class="rv gldc" id="c-comm">$27.60</span></div>
    </div>
  </div>

  <div class="divider">ğŸ“œ Ø§Ù„Ø±Ø¨Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø±Ø©</div>
  <div class="pnl-duo">
    <div class="pc profit">
      <div class="ptitle gc">ğŸŸ¢ Ø§Ù„Ø±Ø¨Ø­ Ø¹Ù†Ø¯ Ø§Ù„Ø¨ÙŠØ¹</div>
      <div class="pgrid">
        <div class="pi"><div class="pl">Ø±Ø¨Ø­ %</div>       <div class="pv gc" id="c-pp2">37.04%</div></div>
        <div class="pi"><div class="pl">Ø±Ø¨Ø­ Ã— Ø¹Ù‚ÙˆØ¯</div>  <div class="pv gc" id="c-pc">0.10Ã—12</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ $ (Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</div>   <div class="pv gc" id="c-pu">$120.00</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ Ø±.Ø³</div>  <div class="pv gc" id="c-ps">Ø±.Ø³ 450.00</div></div>
      </div>
    </div>
    <div class="pc loss">
      <div class="ptitle rc">ğŸ”´ Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚Ù</div>
      <div class="pgrid">
        <div class="pi"><div class="pl">Ø®Ø³Ø§Ø±Ø© % (ØµØ§ÙÙŠ)</div>      <div class="pv rc" id="c-lpc">-14.81%</div></div>
        <div class="pi"><div class="pl">Ø®Ø³Ø§Ø±Ø© Ã— Ø¹Ù‚ÙˆØ¯</div><div class="pv rc" id="c-lc">-0.04Ã—12</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ $ (Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</div>   <div class="pv rc" id="c-lu">-$48.00</div></div>
        <div class="pi"><div class="pl">ØµØ§ÙÙŠ Ø±.Ø³</div>  <div class="pv rc" id="c-ls">Ø±.Ø³ -180.00</div></div>
      </div>
      <div style="text-align:center;margin-top:8px;" id="c-warn-wrap"></div>
    </div>
  </div>

  <div class="divider">ğŸš€ Ø£Ù‚ØµÙ‰ Ø¹Ù‚ÙˆØ¯ Ù…Ù…ÙƒÙ†Ø© (Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</div>
  <div class="max-card">
    <div class="mh">ğŸ“œ Ø¹Ù‚ÙˆØ¯</div>
    <div class="mgrid">
      <div class="mi mn">
        <div class="ml">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ù…Ù…ÙƒÙ†</div>
        <div class="mv bc"  id="c-maxn">34</div>
        <div class="ms"    id="c-minfo">ØªÙƒÙ„ÙØ© $918.00 + Ø¹Ù…ÙˆÙ„Ø© $78.20</div>
      </div>
      <div class="mi mp">
        <div class="ml">Ø±Ø¨Ø­ Ù…Ù…ÙƒÙ† (ØµØ§ÙÙŠ) $</div>
        <div class="mv gc" id="c-mpu">$340.00</div>
        <div class="ms"    id="c-mps">Ø±.Ø³ 1,275.00</div>
      </div>
      <div class="mi mr">
        <div class="ml">Ø®Ø³Ø§Ø±Ø© Ù…Ù…ÙƒÙ†Ø© (ØµØ§ÙÙŠ) $</div>
        <div class="mv rc" id="c-mlu">-$136.00</div>
        <div class="ms"    id="c-mls">Ø±.Ø³ -510.00</div>
      </div>
    </div>
  </div>

  <div class="divider">âš–ï¸ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©</div>
  <div style="max-width:560px;margin:0 auto 20px;">
    <div class="rr-card">
      <div class="rrl">Ø¹Ù‚ÙˆØ¯ â€” R / R</div>
      <div class="rrv" id="c-rrv">1 : 2.5</div>
      <div class="rrd" id="c-rrd">Ø¬ÙŠØ¯ â€” Ù†Ø³Ø¨Ø© Ù…Ù‚Ø¨ÙˆÙ„Ø© Ù„Ù„Ù…ØªØ¯Ø§ÙˆÙ„ÙŠÙ†</div>
    </div>
  </div>

</div><!-- /tab-contracts -->

<div class="foot">âš¡ Ø­Ø§Ø³Ø¨Ø© Ø£Ø³Ù‡Ù… / Ø¹Ù‚ÙˆØ¯ Ù„Ù„Ù…ØªØ¯Ø§ÙˆÙ„ÙŠÙ† Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† â€¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ù‡ÙŠ Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¬Ø§Ø­</div>
</div><!-- /page -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME TOGGLE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleTheme() {
  var html = document.documentElement;
  var current = html.getAttribute('data-theme');
  html.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAB SWITCHING
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function switchTab(tab) {
  document.querySelectorAll('.tab-panel').forEach(function(p){ p.classList.remove('active'); });
  document.querySelectorAll('.tab-btn').forEach(function(b){ b.classList.remove('active'); });
  document.getElementById('tab-' + tab).classList.add('active');
  var idx = tab === 'stocks' ? 0 : 1;
  document.querySelectorAll('.tab-btn')[idx].classList.add('active');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONSTANTS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var FX     = 3.75;
var S_RATE = 0.005; var S_MIN = 1.00; var S_ADJ = 1.15;
var C_RATE = 1.00;  var C_MIN = 1.99; var C_ADJ = 1.15;
var C_MULT = 100;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HELPERS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function fmt(n, d) {
  if (d === undefined) d = 2;
  return Number(n).toLocaleString('en', {minimumFractionDigits: d, maximumFractionDigits: d});
}
function set(id, v) {
  var el = document.getElementById(id);
  if (el) el.textContent = v;
}
function rrTxt(r) {
  if (r >= 3) return 'âœ… Ù…Ù…ØªØ§Ø² â€” ØªØ®Ø§Ø·Ø± Ø¨Ù€ 1 Ù„Ù„Ø±Ø¨Ø­ ' + fmt(r, 1);
  if (r >= 2) return 'âš¡ Ø¬ÙŠØ¯ â€” Ù†Ø³Ø¨Ø© Ù…Ù‚Ø¨ÙˆÙ„Ø© Ù„Ù„Ù…ØªØ¯Ø§ÙˆÙ„ÙŠÙ†';
  if (r >= 1) return 'âš ï¸ Ù…Ù‚Ø¨ÙˆÙ„ â€” ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù‡Ø¯Ù Ø£Ùˆ Ø§Ù„ÙˆÙ‚Ù';
  return 'âŒ Ø¶Ø¹ÙŠÙ â€” Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø© Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ø¹Ø§Ø¦Ø¯';
}

// Commission per side + both sides
function sCommOneSide(n) { return Math.max(S_MIN, n * S_RATE) * S_ADJ; }
function sComm(n)        { return 2 * sCommOneSide(n); }
function cCommOneSide(n) { return Math.max(C_MIN, n * C_RATE) * C_ADJ; }
function cComm(n)        { return 2 * cCommOneSide(n); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CALC
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function calc() {

  /* â”€â”€ STOCKS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  var sCAP  = parseFloat(document.getElementById('s-cap').value)    || 0;
  var sRISK = parseFloat(document.getElementById('s-risk').value)   || 0;
  var sBUY  = parseFloat(document.getElementById('s-buy').value)    || 0;
  var sSTOP = parseFloat(document.getElementById('s-stop').value)   || 0;
  var sTGT  = parseFloat(document.getElementById('s-target').value) || 0;

  var sMaxRisk = sCAP * sRISK / 100;
  var sDiff    = sBUY - sSTOP;

  // â”€â”€ FIX: find max units such that net loss (incl. commission) â‰¤ maxRisk
  // net loss = units * sDiff + comm(units) â‰¤ sMaxRisk
  // Use binary-search / iterative approach from above
  var sUnits = 0;
  if (sDiff > 0 && sBUY > 0) {
    // Start from risk-based estimate
    sUnits = Math.floor(sMaxRisk / sDiff);
    // Reduce until net loss including commission â‰¤ maxRisk AND fits in capital
    while (sUnits > 0 && (sUnits * sDiff + sComm(sUnits)) > sMaxRisk) { sUnits--; }
    // Also cap by available capital
    while (sUnits > 0 && (sUnits * sBUY + sComm(sUnits)) > sCAP) { sUnits--; }
  }

  var sTV      = sUnits * sBUY;
  var sRem     = sCAP - sTV;
  var sCommAct = sComm(sUnits);

  // Breakeven: price where total sale proceeds = buy cost + total commission
  // units * BE = units * sBUY + sComm(units)
  // BE = sBUY + sComm(units) / units
  var sBE = (sUnits > 0) ? (sBUY + sComm(sUnits) / sUnits) : sBUY;

  var sProfPS  = sTGT - sBUY;
  var sProfPct = (sBUY > 0) ? (sProfPS / sBUY * 100) : 0;
  var sProfTot = sUnits * sProfPS - sCommAct;   // ØµØ§ÙÙŠ Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©

  // Actual net loss including commission
  var sLossTot    = sUnits * sDiff + sCommAct;
  var sLossActPct = (sCAP > 0) ? (sLossTot / sCAP * 100) : 0;

  // Max units using full capital (budget-based)
  var sMaxN = 0;
  if (sBUY > 0) {
    sMaxN = Math.floor(sCAP / (sBUY + 2 * S_RATE * S_ADJ + (2 * S_MIN * S_ADJ) / 1000));
    while (sMaxN > 0 && (sMaxN * sBUY + sComm(sMaxN)) > sCAP) { sMaxN--; }
    while (((sMaxN + 1) * sBUY + sComm(sMaxN + 1)) <= sCAP) { sMaxN++; }
  }
  var sMaxCommFull = sComm(sMaxN);
  var sMaxProfit   = sMaxN * sProfPS - sMaxCommFull;
  var sMaxLoss     = sMaxN * sDiff   + sMaxCommFull;

  var sRR  = (sDiff > 0 && sProfPS > 0) ? (sProfPS / sDiff) : 0;
  var sRRR = Math.round(sRR * 10) / 10;

  /* â”€â”€ CONTRACTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  var cCAP  = parseFloat(document.getElementById('c-cap').value)  || 0;
  var cRISK = parseFloat(document.getElementById('c-risk').value) || 0;
  var cBUY  = parseFloat(document.getElementById('c-buy').value)  || 0;
  var cSELL = parseFloat(document.getElementById('c-sell').value) || 0;
  var cSTOP = parseFloat(document.getElementById('c-stop').value) || 0;

  var cMaxRisk = cCAP * cRISK / 100;
  var cDiff    = cBUY - cSTOP;
  var cDiffPC  = cDiff * C_MULT;

  // â”€â”€ FIX: find contracts such that net loss (incl. commission) â‰¤ maxRisk
  var cActual = 0;
  if (cDiffPC > 0 && cBUY > 0) {
    cActual = Math.floor(cMaxRisk / cDiffPC);
    // Reduce until net loss including commission â‰¤ maxRisk
    while (cActual > 0 && (cActual * cDiffPC + cComm(cActual)) > cMaxRisk) { cActual--; }
    // Also cap by available capital
    while (cActual > 0 && (cActual * cBUY * C_MULT + cComm(cActual)) > cCAP) { cActual--; }
  }
  cActual = Math.max(0, cActual);

  var cTV      = cActual * cBUY * C_MULT;
  var cRem     = cCAP - cTV;
  var cCommAct = cComm(cActual);

  // Breakeven: BE = cBUY + cComm(n) / (n * C_MULT)
  var cBE = (cActual > 0) ? (cBUY + cComm(cActual) / (cActual * C_MULT)) : cBUY;

  var cProfPct = (cBUY > 0) ? ((cSELL - cBUY) / cBUY * 100) : 0;
  var cLossPct = (cBUY > 0) ? ((cBUY - cSTOP) / cBUY * 100) : 0;
  var cProfPC  = (cSELL - cBUY) * C_MULT;
  var cLossPC  = cDiffPC;
  var cProfTot = cActual * cProfPC - cCommAct;
  var cLossTot = cActual * cLossPC + cCommAct;
  var cLossActPct = (cCAP > 0) ? (cLossTot / cCAP * 100) : 0;

  var cMaxN = 0;
  if (cBUY > 0) {
    cMaxN = Math.floor(cCAP / (cBUY * C_MULT + 2 * C_RATE * C_ADJ));
    while (cMaxN > 0 && (cMaxN * cBUY * C_MULT + cComm(cMaxN)) > cCAP) { cMaxN--; }
    while (((cMaxN + 1) * cBUY * C_MULT + cComm(cMaxN + 1)) <= cCAP) { cMaxN++; }
  }
  var cMaxProfit = cMaxN * cProfPC - cComm(cMaxN);
  var cMaxLoss   = cMaxN * cLossPC + cComm(cMaxN);
  var cMaxComm   = cComm(cMaxN);

  var cRR  = (cLossPC > 0) ? (cProfPC / cLossPC) : 0;
  var cRRR = Math.round(cRR * 10) / 10;

  /* â”€â”€ DOM UPDATES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  // Stocks
  set('s-nd',   sUnits);
  set('s-be',   '$' + fmt(sBE, 3));
  set('s-tv',   '$' + fmt(sTV));
  set('s-rem',  '$' + fmt(sRem));
  set('s-pp2',  fmt(sProfPct) + '%');
  set('s-lp',   fmt(sLossActPct, 2) + '% (~$' + fmt(sLossTot) + ')');
  set('s-maxr', '$' + fmt(sMaxRisk));
  set('s-diff', fmt(sDiff));
  set('s-comm', '$' + fmt(sCommAct));

  set('s-pp',  fmt(sProfPct) + '%');
  set('s-pc',  fmt(sProfPS, 2) + 'Ã—' + sUnits);
  set('s-pu',  '$' + fmt(sProfTot));
  set('s-ps',  'Ø±.Ø³ ' + fmt(sProfTot * FX));
  set('s-lpc', '-' + fmt(sLossActPct, 2) + '%');
  set('s-lc',  '-' + fmt(sDiff, 2) + 'Ã—' + sUnits);
  set('s-lu',  '-$' + fmt(sLossTot));
  set('s-ls',  'Ø±.Ø³ -' + fmt(sLossTot * FX));

  // Warning if actual loss > risk%
  var sWarnWrap = document.getElementById('s-warn-wrap');
  if (sLossActPct > sRISK + 0.01 && sUnits > 0) {
    sWarnWrap.innerHTML = '<span class="warn-badge">âš ï¸ Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© ' + fmt(sLossActPct,2) + '% (ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</span>';
  } else {
    sWarnWrap.innerHTML = '';
  }

  set('s-maxn',  sMaxN);
  set('s-minfo', 'ØªÙƒÙ„ÙØ© $' + fmt(sMaxN * sBUY) + ' + Ø¹Ù…ÙˆÙ„Ø© $' + fmt(sMaxCommFull));
  set('s-mpu',   '$' + fmt(sMaxProfit));
  set('s-mps',   'Ø±.Ø³ ' + fmt(sMaxProfit * FX));
  set('s-mlu',   '-$' + fmt(sMaxLoss));
  set('s-mls',   'Ø±.Ø³ -' + fmt(sMaxLoss * FX));

  set('s-rrv', '1 : ' + fmt(sRRR, 1));
  set('s-rrd', rrTxt(sRRR));

  // Contracts
  set('c-nd',   cActual);
  set('c-be',   '$' + fmt(cBE, 4));
  set('c-tv',   '$' + fmt(cTV));
  set('c-rem',  '$' + fmt(cRem));
  set('c-pp',   fmt(cProfPct) + '%');
  set('c-lp',   fmt(cLossActPct, 2) + '% (~$' + fmt(cLossTot) + ')');
  set('c-maxr', '$' + fmt(cMaxRisk));
  set('c-diff', fmt(cDiff));
  set('c-comm', '$' + fmt(cCommAct));

  set('c-pp2', fmt(cProfPct) + '%');
  set('c-pc',  fmt(cProfPC / C_MULT, 2) + 'Ã—' + cActual);
  set('c-pu',  '$' + fmt(cProfTot));
  set('c-ps',  'Ø±.Ø³ ' + fmt(cProfTot * FX));
  set('c-lpc', '-' + fmt(cLossActPct, 2) + '%');
  set('c-lc',  '-' + fmt(cLossPC / C_MULT, 2) + 'Ã—' + cActual);
  set('c-lu',  '-$' + fmt(cLossTot));
  set('c-ls',  'Ø±.Ø³ -' + fmt(cLossTot * FX));

  var cWarnWrap = document.getElementById('c-warn-wrap');
  if (cLossActPct > cRISK + 0.01 && cActual > 0) {
    cWarnWrap.innerHTML = '<span class="warn-badge">âš ï¸ Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© ' + fmt(cLossActPct,2) + '% (ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)</span>';
  } else {
    cWarnWrap.innerHTML = '';
  }

  set('c-maxn',  cMaxN);
  set('c-minfo', 'ØªÙƒÙ„ÙØ© $' + fmt(cMaxN * cBUY * C_MULT) + ' + Ø¹Ù…ÙˆÙ„Ø© $' + fmt(cMaxComm));
  set('c-mpu',   '$' + fmt(cMaxProfit));
  set('c-mps',   'Ø±.Ø³ ' + fmt(cMaxProfit * FX));
  set('c-mlu',   '-$' + fmt(cMaxLoss));
  set('c-mls',   'Ø±.Ø³ -' + fmt(cMaxLoss * FX));

  set('c-rrv', '1 : ' + fmt(cRRR, 1));
  set('c-rrd', rrTxt(cRRR));
}

calc();
</script>
</body>
</html>
